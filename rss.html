<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RSS Feed Filter</title>
</head>
<body>
  <h1>RSS Feed Filter</h1>
  <label for="keyword">Enter the keyword to filter news:</label>
  <input type="text" id="keyword" name="keyword">
  <button onclick="fetchFilteredNews()">Fetch News</button>
  <div id="news"></div>

  <script>
    const parseRSSFeed = async (url, keyword) => {
      const corsProxy = "https://api.allorigins.win/raw?url=";
      const response = await fetch(corsProxy + url);
      const xmlData = await response.text();
      const parser = new DOMParser();
      const xmlDoc = parser.parseFromString(xmlData, "application/xml");
      processNews(xmlDoc, keyword);
    };

    const processNews = (xmlDoc, keyword) => {
      const newsDiv = document.getElementById("news");
      newsDiv.innerHTML = "";
      const items = xmlDoc.getElementsByTagName("item");

      for (let i = 0; i < items.length; i++) {
        const titleElement = items[i].getElementsByTagName("title")[0];
        const title = titleElement.textContent.toLowerCase();

        if (title.includes(keyword.toLowerCase())) {
          const linkElement = items[i].getElementsByTagName("link")[0];
          
          const alertText = document.createTextNode(`ALERT: New story with keyword '${keyword}'!`);
          const titleText = document.createTextNode("Title: " + titleElement.textContent);
          const linkText = document.createTextNode("Link: " + linkElement.textContent);

          const alertDiv = document.createElement("div");
          const titleDiv = document.createElement("div");
          const linkDiv = document.createElement("div");

          alertDiv.appendChild(alertText);
          titleDiv.appendChild(titleText);
          linkDiv.appendChild(linkText);

          newsDiv.appendChild(alertDiv);
          newsDiv.appendChild(titleDiv);
          newsDiv.appendChild(linkDiv);

          const breakLine = document.createElement("br");
          newsDiv.appendChild(breakLine);
        }
      }
    };

    const fetchFilteredNews = () => {
      const rssFeedUrl = "https://globalnews.ca/sports/feed/";
      const inputKeyword = document.getElementById("keyword").value;
      parseRSSFeed(rssFeedUrl, inputKeyword);
    };
  </script>
</body>
</html>